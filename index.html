<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Chela Gask | Tienda</title>
  <style>
    :root{
  --color-bg: #ffffff;
  --color-primary: #d4af37;
  --color-text: #000000;
  --color-gray-dark: #333333;
  --color-gray: #555555;
  --color-gray-light: #cccccc;
}
body {
  background-color: var(--color-bg);
  color: var(--color-text);
  font-family: 'Arial', sans-serif;
}
button {
  background: var(--color-primary);
  color: var(--color-bg);
  border-radius: 8px;
  padding: 10px 16px;
}
button:hover {
  background: var(--color-gray-light);
  color: var(--color-bg);
}
    
   
    img{max-width:100%;display:block}
    /* Header */
    .header{position:sticky;top:0;z-index:50;background:#fff;border-bottom:1px solid var(--border);} 
    .header-inner{max-width:1200px;margin:0 auto;display:flex;align-items:center;gap:16px;padding:12px 16px}
    .logo{display:flex;align-items:center;gap:10px}
    .logo img{height:28px;width:auto}
    .brand{font-weight:700;letter-spacing:.3px}
    .nav{display:flex;gap:20px;margin-left:28px}
    .nav a{padding:8px 10px;border-radius:12px}
    .nav a:hover{background:var(--pill)}
    .spacer{flex:1}
    .icon-btn{height:36px;width:36px;display:grid;place-items:center;border-radius:12px;border:1px solid var(--border);background:#fff;cursor:pointer}
    .icon-btn:hover{background:var(--pill)}
    .badge{position:absolute;top:-6px;right:-6px;background:var(--accent);color:#fff;border-radius:999px;font-size:11px;padding:2px 6px}
    .cart-wrap{position:relative}
    /* Drawer */
    .drawer{position:fixed;inset:0;pointer-events:none}
    .drawer.open{pointer-events:auto}
    .backdrop{position:absolute;inset:0;background:rgba(0,0,0,.28);opacity:0;transition:.2s}
    .drawer.open .backdrop{opacity:1}
    .panel{position:absolute;left:0;top:0;height:100%;width:290px;background:#fff;transform:translateX(-100%);transition:.25s;border-right:1px solid var(--border);display:flex;flex-direction:column}
    .drawer.open .panel{transform:translateX(0)}
    .panel header{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;border-bottom:1px solid var(--border)}
    .panel nav a{display:block;padding:14px 16px;border-bottom:1px solid var(--border)}

    /* Sections */
    .container{max-width:1200px;margin:0 auto;padding:10px 16px 40px}
    .bar{display:flex;align-items:center;gap:10px;padding:12px 8px;font-weight:700}
    .bar .dot{height:8px;width:8px;border-radius:999px;background:#000}

    /* Carousel */
    .carousel{position:relative;border-radius:16px;overflow:hidden;background:var(--card);border:1px solid var(--border)}
    .carousel img{width:100%;height:340px;object-fit:cover}
    .carousel .dots{position:absolute;bottom:10px;left:0;right:0;display:flex;justify-content:center;gap:6px}
    .carousel .dots span{height:8px;width:8px;border-radius:999px;background:#fff;opacity:.5;border:1px solid #000}
    .carousel .dots span.active{opacity:1}

    /* Grids */
    .grid{display:grid;gap:14px}
    .grid.cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}
    .grid.cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}
    @media (max-width:960px){.grid.cols-4{grid-template-columns:repeat(2,minmax(0,1fr))}}
    @media (max-width:720px){.grid.cols-3{grid-template-columns:repeat(1,minmax(0,1fr))}}

    .card{border:1px solid var(--border);border-radius:16px;background:#fff;overflow:hidden;display:flex;flex-direction:column}
    .card .meta{padding:10px 12px}
    .price{font-weight:700}
    .muted{color:var(--muted)}

    /* Footer banner */
    .banner{margin-top:24px;border:1px dashed var(--border);border-radius:16px;padding:18px;background:#f9fafb}
    .banner h3{margin:0 0 8px 0}
    .footer{margin-top:26px;padding:26px 16px;border-top:1px solid var(--border);color:#555}

    /* Toast */
    .toast{position:fixed;right:16px;bottom:16px;background:#111;color:#fff;padding:12px 14px;border-radius:12px;opacity:0;transform:translateY(8px);transition:.25s;z-index:60}
    .toast.show{opacity:1;transform:translateY(0)}

    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;border:1px solid var(--border);background:#111;color:#fff;cursor:pointer}
    .btn.secondary{background:#fff;color:#111}
    .qty{display:inline-flex;align-items:center;border:1px solid var(--border);border-radius:12px}
    .qty button{background:#fff;border:0;padding:8px 10px;cursor:pointer}
    .qty span{width:38px;display:inline-grid;place-items:center}

    .form{display:grid;gap:12px}
    .form .row{display:grid;gap:10px;grid-template-columns:repeat(2,minmax(0,1fr))}
    @media (max-width:720px){.form .row{grid-template-columns:1fr}}
    input,select{width:100%;padding:10px 12px;border-radius:12px;border:1px solid var(--border);}
    label{font-size:.9rem;color:#333}
    .error{color:var(--accent);font-size:.9rem}
  </style>
</head>
<body>
  <!-- HEADER -->
  <header class="header">
    <div class="header-inner">
      <button id="menuBtn" class="icon-btn" aria-label="Men√∫">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
      </button>
      <a href="#/" class="logo" title="Inicio">
        <img src="assets/logo.png" alt="Logo Chela Gask" onerror="this.src='https://dummyimage.com/120x40/000/fff&text=CHELA+GASK'"/>
        <span class="brand">Chela Gask</span>
      </a>
      <nav class="nav" id="topNav">
        <!-- Subcategor√≠as visibles tipo Nike -->
        <a href="#/categoria/caballero">Caballero</a>
        <a href="#/categoria/dama">Dama</a>
        <a href="#/categoria/nino">Ni√±@</a>
        <a href="#/categoria/accesorios">Accesorios</a>
        <a href="#/categoria/ropones">Ropones</a>
        <a href="#/categoria/bisuteria">Bisuter√≠a</a>
      </nav>
      <div class="spacer"></div>
      <a class="icon-btn" href="#/favoritos" aria-label="Favoritos" title="Favoritos">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.8 4.6a5.5 5.5 0 0 0-7.8 0L12 5.6l-1-1a5.5 5.5 0 0 0-7.8 7.8l1 1L12 22l7.8-8.6 1-1a5.5 5.5 0 0 0 0-7.8z"/></svg>
      </a>
      <a class="icon-btn cart-wrap" href="#/carrito" aria-label="Carrito" title="Carrito">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 12.39A2 2 0 0 0 9.62 15h8.76a2 2 0 0 0 2-1.61L23 6H6"/></svg>
        <span id="cartCount" class="badge" style="display:none">0</span>
      </a>
    </div>
  </header>

  <!-- DRAWER -->
  <div id="drawer" class="drawer">
    <div class="backdrop" onclick="toggleDrawer(false)"></div>
    <aside class="panel" role="dialog" aria-label="Men√∫ lateral">
      <header>
        <strong>Men√∫</strong>
        <button class="icon-btn" onclick="toggleDrawer(false)" aria-label="Cerrar">‚úï</button>
      </header>
      <nav>
        <a href="#/" onclick="toggleDrawer(false)">Inicio</a>
        <a href="#/categoria/caballero" onclick="toggleDrawer(false)">Caballero</a>
        <a href="#/categoria/dama" onclick="toggleDrawer(false)">Dama</a>
        <a href="#/categoria/nino" onclick="toggleDrawer(false)">Ni√±@</a>
        <a href="#/categoria/accesorios" onclick="toggleDrawer(false)">Accesorios</a>
        <a href="#/categoria/ropones" onclick="toggleDrawer(false)">Ropones</a>
        <a href="#/categoria/bisuteria" onclick="toggleDrawer(false)">Bisuter√≠a</a>
        <a href="#/carrito" onclick="toggleDrawer(false)">Carrito</a>
      </nav>
    </aside>
  </div>

  <!-- MAIN RENDER -->
  <main id="app" class="container"></main>

  <div id="toast" class="toast"></div>

  <footer class="footer">
    ¬© <span id="year"></span> Chela Gask. Todos los derechos reservados.
  </footer>

  <script>
    // ==========================
    // üîß CONFIGURACI√ìN R√ÅPIDA
    // ==========================
    // 1) Carrusel: agrega o cambia im√°genes aqu√≠. Usa rutas locales (carpeta /assets) o URLs.
    const CAROUSEL_IMAGES = [
      'assets/hero1.jpg',
      'assets/hero2.jpg',
      'assets/hero3.jpg'
    ];
    const CAROUSEL_INTERVAL_MS = 4000; // tiempo entre cambios

    // 2) Base de datos de productos (puedes reemplazarla con Google Sheets ‚Üí CSV/JSON, ver notas m√°s abajo)
    // Campos m√≠nimos: id, nombre, categoria, precio, imagenes[], tallas[], stockPorTalla{Talla:unidades}
    const PRODUCTS = [
      { id:'CG-001', nombre:'Playera B√°sica', categoria:'caballero', precio:199, imagenes:['assets/p1-1.jpg','assets/p1-2.jpg'], tallas:['S','M','L','XL'], stock:{'S':10,'M':8,'L':6,'XL':3}, promo:true },
      { id:'CG-002', nombre:'Blusa Casual', categoria:'dama', precio:249, imagenes:['assets/p2-1.jpg','assets/p2-2.jpg'], tallas:['XS','S','M','L'], stock:{'XS':4,'S':7,'M':5,'L':2}, promo:false },
      { id:'CG-003', nombre:'Conjunto Ni√±o', categoria:'nino', precio:299, imagenes:['assets/p3-1.jpg'], tallas:['2','4','6','8'], stock:{'2':5,'4':6,'6':3,'8':2}, promo:true },
      { id:'CG-004', nombre:'Rop√≥n Ceremonia', categoria:'ropones', precio:899, imagenes:['assets/p4.jpg'], tallas:['√önica'], stock:{'√önica':5}, promo:true },
      { id:'CG-005', nombre:'Collar Acero', categoria:'bisuteria', precio:149, imagenes:['assets/p5.jpg'], tallas:['√önica'], stock:{'√önica':20}, promo:false },
      { id:'CG-006', nombre:'Gorra Logo', categoria:'accesorios', precio:179, imagenes:['assets/p6.jpg'], tallas:['√önica'], stock:{'√önica':12}, promo:false },
      { id:'CG-007', nombre:'Sudadera Unisex', categoria:'caballero', precio:499, imagenes:['assets/p7.jpg'], tallas:['S','M','L'], stock:{'S':5,'M':5,'L':5}, promo:true },
      { id:'CG-008', nombre:'Vestido Largo', categoria:'dama', precio:699, imagenes:['assets/p8.jpg'], tallas:['S','M','L'], stock:{'S':2,'M':3,'L':1}, promo:false }
    ];

    // 3) Texto del banner inferior (puedes editar libremente)
    const BANNER_INFO = {
      titulo: 'Atenci√≥n y env√≠os',
      lineas: [
        'Env√≠os a todo M√©xico. Tiempo estimado 2‚Äì5 d√≠as h√°biles.',
        'Cambios y devoluciones dentro de los 7 d√≠as con ticket.',
        'WhatsApp de atenci√≥n: 44xx xxx xxx (10:00‚Äì19:00).',
        'Promos y novedades en Instagram: @chelagask.'
      ]
    };

    // ==========================
    // Utilidades
    // ==========================
    const $ = s => document.querySelector(s);
    const app = $('#app');
    const toast = $('#toast');
    const state = { idx:0 };
    const CATS = ['caballero','dama','nino','accesorios','ropones','bisuteria'];

    function showToast(msg){
      toast.textContent = msg; toast.classList.add('show');
      setTimeout(()=>toast.classList.remove('show'), 5000);
    }
    function money(n){return new Intl.NumberFormat('es-MX',{style:'currency',currency:'MXN'}).format(n)}

    // LocalStorage Carrito
    function getCart(){ try{ return JSON.parse(localStorage.getItem('cg_cart')||'[]'); }catch(e){return []}}
    function setCart(items){ localStorage.setItem('cg_cart', JSON.stringify(items)); updateCartCount(); }
    function updateCartCount(){ const c = getCart().reduce((a,i)=>a+i.cantidad,0); const el=$('#cartCount'); el.textContent=c; el.style.display=c? 'inline-block':'none'; }

    // Drawer
    const drawer = $('#drawer');
    $('#menuBtn').addEventListener('click', ()=>toggleDrawer(true));
    function toggleDrawer(open){ drawer.classList.toggle('open', !!open) }

    // Router simple
    window.addEventListener('hashchange', router);
    window.addEventListener('load', ()=>{ updateCartCount(); router(); $('#year').textContent=new Date().getFullYear(); startCarousel(); });

    function router(){
      const h = location.hash.slice(1) || '/';
      const [_, route, a, b] = h.split('/');
      if(h === '/' || route==='') return renderHome();
      if(route==='categoria') return renderCategory(a);
      if(route==='producto') return renderProduct(decodeURIComponent(a));
      if(route==='carrito') return renderCart();
      if(route==='postpago') return renderPostPago();
      return renderNotFound();
    }

    // ==========================
    // HOME
    // ==========================
    function renderHome(){
      app.innerHTML = `
        <section class="bar"><span class="dot"></span> LO NUEVO</section>
        <section class="carousel" id="carousel"></section>
        <section style="margin-top:18px">
          <h3>Art√≠culos destacados</h3>
          <div class="grid cols-4" id="destacados"></div>
        </section>
        <section style="margin-top:10px" class="bar"><span class="dot"></span> PROMOCIONES</section>
        <section>
          <div class="grid cols-3" id="promos"></div>
        </section>
        ${renderBanner()}
      `;
      mountCarousel();
      mountDestacados();
      mountPromos();
    }

    // Carrusel
    function mountCarousel(){
      const el = $('#carousel');
      el.innerHTML = `
        <img id="carImg" alt="Carrusel" src="${CAROUSEL_IMAGES[state.idx % CAROUSEL_IMAGES.length]}">
        <div class="dots">${CAROUSEL_IMAGES.map((_,i)=>`<span data-i="${i}" class="${i===state.idx?'active':''}"></span>`).join('')}</div>
      `;
    }
    function startCarousel(){
      setInterval(()=>{
        state.idx = (state.idx + 1) % CAROUSEL_IMAGES.length;
        const img = $('#carImg'); if(!img) return; img.src = CAROUSEL_IMAGES[state.idx];
        document.querySelectorAll('.carousel .dots span').forEach((d,i)=>{
          d.classList.toggle('active', i===state.idx)
        })
      }, CAROUSEL_INTERVAL_MS);
    }

    // Destacados aleatorios (cambia al refrescar)
    function mountDestacados(){
      const cont = $('#destacados');
      const shuffled = [...PRODUCTS].sort(()=>Math.random()-0.5).slice(0,4);
      cont.innerHTML = shuffled.map(p=>cardHTML(p)).join('');
    }
    // Promos: 3 aleatorias al refrescar
    function mountPromos(){
      const cont = $('#promos');
      const pool = PRODUCTS.filter(p=>p.promo);
      const pick = (pool.length>=3? pool.sort(()=>Math.random()-0.5).slice(0,3) : pool);
      cont.innerHTML = pick.map(p=>cardHTML(p)).join('');
    }

    function cardHTML(p){
      return `
      <article class="card">
        <a href="#/producto/${encodeURIComponent(p.id)}">
          <img loading="lazy" src="${p.imagenes[0]||''}" alt="${p.nombre}">
        </a>
        <div class="meta">
          <div class="muted" style="font-size:.85rem;text-transform:uppercase">${p.categoria}</div>
          <a href="#/producto/${encodeURIComponent(p.id)}"><strong>${p.nombre}</strong></a>
          <div class="price">${money(p.precio)}</div>
        </div>
      </article>`
    }

    function renderBanner(){
      return `
        <section class="banner">
          <h3>${BANNER_INFO.titulo}</h3>
          <ul style="margin:0;padding-left:18px;color:#333">
            ${BANNER_INFO.lineas.map(x=>`<li>${x}</li>`).join('')}
          </ul>
        </section>
      `;
    }

    // ==========================
    // CATEGOR√çA
    // ==========================
    function renderCategory(cat){
      if(!CATS.includes(cat)) return renderNotFound();
      const items = PRODUCTS.filter(p=>p.categoria===cat);
      app.innerHTML = `
        <section class="bar"><span class="dot"></span> ${cat.toUpperCase()}</section>
        <div class="grid cols-4">${items.map(cardHTML).join('')}</div>
        ${renderBanner()}
      `;
    }

    // ==========================
    // PRODUCTO
    // ==========================
    function renderProduct(id){
      const p = PRODUCTS.find(x=>x.id===id);
      if(!p) return renderNotFound();
      const tallaDefault = p.tallas[0];
      app.innerHTML = `
        <div class="grid" style="grid-template-columns: 1.1fr .9fr; gap:24px">
          <div>
            <div id="gal" class="grid" style="grid-template-columns:repeat(5, minmax(0,1fr)); gap:10px; margin-bottom:10px">
              ${p.imagenes.map((src,i)=>`<img class="thumb" data-i="${i}" style="border:1px solid var(--border);border-radius:10px;cursor:pointer" src="${src}" alt="${p.nombre} ${i+1}">`).join('')}
            </div>
            <div style="border:1px solid var(--border);border-radius:16px;overflow:hidden">
              <img id="mainImg" src="${p.imagenes[0]}" alt="${p.nombre}" style="width:100%;max-height:520px;object-fit:cover">
            </div>
          </div>
          <div>
            <h1 style="margin:0 0 8px 0">${p.nombre}</h1>
            <div class="muted">Modelo: ${p.id}</div>
            <div class="price" style="font-size:1.4rem;margin:6px 0 14px 0">${money(p.precio)}</div>
            <div style="margin:12px 0">
              <label>Talla</label>
              <div style="display:flex;gap:8px;flex-wrap:wrap">${p.tallas.map(t=>`<button class="btn secondary talla" data-t="${t}">${t}</button>`).join('')}</div>
            </div>
            <div style="margin:12px 0">
              <label>Cantidad</label>
              <div class="qty"><button onclick="chgQty(-1)">‚àí</button><span id="qty">1</span><button onclick="chgQty(1)">+</button></div>
            </div>
            <div class="muted" id="stockMsg">Disponibles: ${p.stock[tallaDefault]||0}</div>
            <div style="margin-top:16px;display:flex;gap:10px;flex-wrap:wrap">
              <button class="btn" id="addBtn">Agregar al carrito</button>
              <a class="btn secondary" href="#/carrito">Ver carrito</a>
            </div>
          </div>
        </div>
      `;

      // Galer√≠a
      document.querySelectorAll('.thumb').forEach(th=>{
        th.addEventListener('click', ()=>{ $('#mainImg').src = th.src; });
      });

      // Tallas
      let tallaSel = tallaDefault; markTalla();
      document.querySelectorAll('.talla').forEach(b=>{
        b.addEventListener('click', ()=>{ tallaSel = b.dataset.t; markTalla(); $('#stockMsg').textContent = 'Disponibles: '+(p.stock[tallaSel]||0); });
      });
      function markTalla(){
        document.querySelectorAll('.talla').forEach(x=>x.style.borderColor='var(--border)');
        const btn = document.querySelector(`.talla[data-t="${tallaSel}"]`); if(btn) btn.style.borderColor='#111';
      }

      // Cantidad
      window.chgQty = function(d){ const el=$('#qty'); let v=+el.textContent; v=Math.max(1, v+d); el.textContent=v };

      // Agregar al carrito
      $('#addBtn').addEventListener('click', ()=>{
        const cantidad = +$('#qty').textContent;
        const stock = p.stock[tallaSel]||0;
        if(cantidad>stock){ showToast('No hay suficientes piezas en stock para esa talla.'); return; }
        const cart = getCart();
        cart.push({ id:p.id, nombre:p.nombre, precio:p.precio, talla:tallaSel, cantidad, imagen:p.imagenes[0] });
        setCart(cart);
        showToast('Se agreg√≥ al carrito.');
      });
    }

    // ==========================
    // CARRITO
    // ==========================
    function renderCart(){
      const cart = getCart();
      const total = cart.reduce((a,i)=>a + i.precio * i.cantidad, 0);
      const lines = cart.map(i=>{
        // mostrar cada pieza enlistada
        return Array.from({length:i.cantidad}, (_,k)=>`<div class="card" style="padding:10px;display:grid;grid-template-columns:90px 1fr auto;gap:10px">
          <img src="${i.imagen}" alt="${i.nombre}" style="height:80px;width:80px;object-fit:cover;border-radius:10px;border:1px solid var(--border)">
          <div>
            <div><strong>${i.nombre}</strong> <span class="muted">(${i.id})</span></div>
            <div class="muted">Talla: ${i.talla}</div>
          </div>
          <div style="text-align:right">${money(i.precio)}</div>
        </div>`).join('')
      }).join('');

      app.innerHTML = `
        <section class="bar"><span class="dot"></span> CONFIRMACI√ìN DE COMPRA</section>
        <div class="grid" style="grid-template-columns: 1.1fr .9fr; gap:20px">
          <div>
            ${cart.length? lines : '<p class="muted">Tu carrito est√° vac√≠o.</p>'}
            <div style="text-align:right;margin-top:10px"><strong>TOTAL: ${money(total)}</strong></div>

            <section class="banner" style="margin-top:16px">
              <h3>Datos de env√≠o a domicilio</h3>
              <form id="envioForm" class="form">
                <div class="row">
                  <div>
                    <label>Nombre</label>
                    <input required name="nombre" />
                  </div>
                  <div>
                    <label>Apellidos</label>
                    <input required name="apellidos" />
                  </div>
                </div>
                <div class="row">
                  <div>
                    <label>C√≥digo Postal (CP)</label>
                    <input required name="cp" pattern="\\d{5}" placeholder="5 d√≠gitos" />
                  </div>
                  <div>
                    <label>Estado (auto)</label>
                    <input required name="estado" id="estadoAuto" readonly />
                  </div>
                </div>
                <div class="row">
                  <div>
                    <label>Calle</label>
                    <input required name="calle" />
                  </div>
                  <div>
                    <label>N√∫mero</label>
                    <input required name="numero" />
                  </div>
                </div>
                <div class="row">
                  <div>
                    <label>N√∫mero interior (opcional)</label>
                    <input name="interior" />
                  </div>
                  <div>
                    <label>Correo</label>
                    <input required type="email" name="correo" />
                  </div>
                </div>
                <div>
                  <label>Tel√©fono</label>
                  <input required name="telefono" pattern="[0-9\s+()-]{8,}" />
                </div>
                <div class="error" id="formError" style="display:none">Completa todos los campos obligatorios.</div>
              </form>
            </section>
          </div>
          <div>
            <div class="card" style="padding:14px">
              <h3 style="margin:4px 0 12px 0">Pago</h3>
              <p class="muted" style="margin-top:0">Integraci√≥n real con Mercado Pago requiere un peque√±o backend (ver comentarios en el c√≥digo). Abajo tienes un simulador de flujo:</p>
              <div style="display:flex;flex-direction:column;gap:10px">
                <button class="btn" onclick="simularPago('ok')">Pagar (Simular OK)</button>
                <button class="btn secondary" onclick="simularPago('error')">Simular ERROR</button>
                <button class="btn secondary" onclick="simularPago('insuficiente')">Simular FONDOS INSUFICIENTES</button>
              </div>
            </div>
          </div>
        </div>
        ${renderBanner()}
      `;

      // Autollenado Estado por CP (primeros 2 d√≠gitos ‚Üí estado)
      const CP_MAP = { '01':'Aguascalientes','02':'Baja California','03':'Baja California Sur','04':'Campeche','05':'Coahuila','06':'Colima','07':'Chiapas','08':'Chihuahua','09':'Ciudad de M√©xico','10':'Durango','11':'Guanajuato','12':'Guerrero','13':'Hidalgo','14':'Jalisco','15':'M√©xico','16':'Michoac√°n','17':'Morelos','18':'Nayarit','19':'Nuevo Le√≥n','20':'Oaxaca','21':'Puebla','22':'Quer√©taro','23':'Quintana Roo','24':'San Luis Potos√≠','25':'Sinaloa','26':'Sonora','27':'Tabasco','28':'Tamaulipas','29':'Tlaxcala','30':'Veracruz','31':'Yucat√°n','32':'Zacatecas' };
      const cpInput = document.querySelector('input[name="cp"]');
      cpInput.addEventListener('input', ()=>{
        const v = cpInput.value.replace(/\D/g,''); if(v.length>=2){ $('#estadoAuto').value = CP_MAP[v.slice(0,2)] || ''; }
      });

      window.simularPago = function(tipo){
        const form = document.getElementById('envioForm');
        if(!form.checkValidity()){ $('#formError').style.display='block'; form.reportValidity(); return; }
        $('#formError').style.display='none';
        if(tipo==='ok'){
          // En integraci√≥n real: esperar confirmaci√≥n del backend / webhook
          const datos = Object.fromEntries(new FormData(form).entries());
          const resumen = { items:getCart(), total: getCart().reduce((a,i)=>a+i.precio*i.cantidad,0), envio:datos };
          sessionStorage.setItem('cg_postpago', JSON.stringify(resumen));
          // opcional: aqu√≠ podr√≠as disparar un email via API (EmailJS/App Script)
          location.hash = '/postpago';
          // Vaciar carrito
          setCart([]);
        } else if(tipo==='error') {
          showToast('PAGO ERROR: intenta nuevamente.');
        } else {
          showToast('Fondos insuficientes: intenta con otro m√©todo.');
        }
      }
    }

    // ==========================
    // POST-PAGO
    // ==========================
    function renderPostPago(){
      const data = JSON.parse(sessionStorage.getItem('cg_postpago')||'null');
      if(!data){ app.innerHTML = '<p>Sin informaci√≥n de compra.</p>'; return; }
      const {items,total,envio} = data;
      const lines = items.map(i=>Array.from({length:i.cantidad},()=>`<div class="card" style="padding:10px;display:grid;grid-template-columns:90px 1fr auto;gap:10px">
          <img src="${i.imagen}" alt="${i.nombre}" style="height:80px;width:80px;object-fit:cover;border-radius:10px;border:1px solid var(--border)">
          <div><div><strong>${i.nombre}</strong> <span class="muted">(${i.id})</span></div><div class="muted">Talla: ${i.talla}</div></div>
          <div style="text-align:right">${money(i.precio)}</div>
        </div>`).join('')).join('');
      app.innerHTML = `
        <section class="bar"><span class="dot"></span> PAGO CONFIRMADO</section>
        <div class="card" style="padding:14px">${lines}<div style="text-align:right;margin-top:10px"><strong>TOTAL: ${money(total)}</strong></div></div>
        <section class="banner" style="margin-top:16px">
          <h3>Datos de env√≠o</h3>
          <div style="display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px">
            <div><strong>Nombre:</strong> ${envio.nombre} ${envio.apellidos}</div>
            <div><strong>CP/Estado:</strong> ${envio.cp} / ${envio.estado}</div>
            <div><strong>Calle y n√∫mero:</strong> ${envio.calle} ${envio.numero}${envio.interior? (' Int. '+envio.interior):''}</div>
            <div><strong>Contacto:</strong> ${envio.correo} ¬∑ ${envio.telefono}</div>
          </div>
          <p class="muted" style="margin-top:10px">Te enviamos un correo con el detalle del pedido. Mantente atento a las actualizaciones de env√≠o.</p>
        </section>
        ${renderBanner()}
        <div style="margin-top:16px"><a class="btn" href="#/">Volver al inicio</a></div>
      `;
    }

    function renderNotFound(){ app.innerHTML = '<p>P√°gina no encontrada.</p>'; }

    // ==========================
    // üìå Notas de implementaci√≥n (lee y borra si gustas)
    // ==========================
    /*
    ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    1) Reemplazar "base de datos" por Google Sheets
       - Crea una hoja con columnas: id, nombre, categoria, precio, imagenes (separadas por |), tallas (separadas por |), stock (JSON tipo {"S":10,"M":5}) y promo (true/false).
       - En Google Sheets: Archivo ‚Üí Publicar en la web ‚Üí como CSV.
       - Obt√©n la URL p√∫blica del CSV y haz fetch desde JS:
           fetch('URL_DEL_CSV').then(r=>r.text()).then(csv=>{ /* parsea csv ‚Üí PRODUCTS */ })
       - O usa Apps Script para exponer un JSON bello y lo reemplazas en la constante PRODUCTS.

    2) Mercado Pago en GitHub Pages (sin servidor)
       - MP requiere crear una "preferencia" en backend para obtener el init_point. Puedes usar:
         ‚Ä¢ Google Apps Script, Cloudflare Workers, Netlify Functions o Vercel Edge Functions.
       - Flujo: cliente ‚Üí tu funci√≥n serverless crea preferencia (monto, √≠tems, back_urls) ‚Üí devuelve init_point ‚Üí rediriges al checkout MP.
       - back_urls (success, pending, failure) deben regresar a: https://TU_USUARIO.github.io/tu-repo/#/postpago
       - En la p√°gina de √©xito (postpago) validas el pago consultando tu backend o Webhook (recomendado) y luego vac√≠as el carrito.

    3) Email de confirmaci√≥n (est√°tico)
       - Usa EmailJS o Apps Script (doPost) para enviar el correo con el resumen (items + direcci√≥n).

    4) Im√°genes del carrusel y productos
       - Ponlas en /assets y actualiza CAROUSEL_IMAGES y PRODUCTS.imagenes.

    5) Subp√°ginas
       - Ya est√°n cubiertas por router: #/categoria/{caballero|dama|nino|accesorios|ropones|bisuteria}
       - Producto individual: #/producto/{ID}
       - Carrito: #/carrito

    6) Estilos
       - El dise√±o es limpio tipo "Nike". Ajusta colores en :root.
    */
  </script>
</body>
</html>
